<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Matisse  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="Matisse  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">Matisse Docs</a> (100% documented)</p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">Matisse Reference</a>
        <img id="carat" src="img/carat.png" />
        Matisse  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/DefaultImageCreator.html">DefaultImageCreator</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DefaultImageLoader.html">DefaultImageLoader</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DefaultImageRequestHandler.html">DefaultImageRequestHandler</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DiskImageCache.html">DiskImageCache</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ImageLoaderBase.html">ImageLoaderBase</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ImageRequest.html">ImageRequest</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ImageRequestBuilder.html">ImageRequestBuilder</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Matisse.html">Matisse</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/MatisseContext.html">MatisseContext</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/MemoryImageCache.html">MemoryImageCache</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ResizeTransformation.html">ResizeTransformation</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enums</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/MatisseErrorCode.html">MatisseErrorCode</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/NSError.html">NSError</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/UIImageView.html">UIImageView</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/ImageCache.html">ImageCache</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/ImageLoader.html">ImageLoader</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/ImageRequestHandler.html">ImageRequestHandler</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/ImageRequestTarget.html">ImageRequestTarget</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/ImageTransformation.html">ImageTransformation</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <p><a href="https://github.com/Carthage/Carthage"><img src="https://img.shields.io/badge/Carthage-compatible-4BC51D.svg" alt="Carthage compatible"></a>
<a href="https://cocoapods.org/pods/Matisse"><img src="https://img.shields.io/cocoapods/v/Matisse.svg" alt="CocoaPods"></a>
<a href="https://github.com/konoma/matisse/blob/master/LICENSE"><img src="https://img.shields.io/badge/license-MIT-blue.svg" alt="License MIT"></a></p>
<a href='#matisse' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='matisse'>Matisse</h1>

<p>Matisse is an image retrieval and caching library for iOS inspired by
<a href="https://github.com/square/picasso">Picasso</a>.</p>
<a href='#usage' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='usage'>Usage</h2>

<p>With Matisse you can download and display an image in an image view with
a single line:</p>
<pre class="highlight swift"><code>    <span class="kt">Matisse</span><span class="o">.</span><span class="nf">load</span><span class="p">(</span><span class="n">imageURL</span><span class="p">)</span><span class="o">.</span><span class="nf">showIn</span><span class="p">(</span><span class="n">imageView</span><span class="p">)</span>
</code></pre>

<p>This automatically takes care of downloading, caching and showing the image
in the view. If you use this code in a <code>UITableViewDataSource</code> it also makes
sure that the correct image is shown even in case of a cell reuse.</p>

<p>If you want to resize the image to fit the image view (generally a good idea)
you can do so too:</p>
<pre class="highlight swift"><code>    <span class="kt">Matisse</span><span class="o">.</span><span class="nf">load</span><span class="p">(</span><span class="n">imageURL</span><span class="p">)</span><span class="o">.</span><span class="nf">resizeTo</span><span class="p">(</span><span class="n">myImageSize</span><span class="p">)</span><span class="o">.</span><span class="nf">showIn</span><span class="p">(</span><span class="n">imageView</span><span class="p">)</span>
</code></pre>

<p>If you just need the image, without loading it into a view, then you can fetch
it like this:</p>
<pre class="highlight swift"><code>    <span class="kt">Matisse</span><span class="o">.</span><span class="nf">load</span><span class="p">(</span><span class="n">imageURL</span><span class="p">)</span><span class="o">.</span><span class="nf">resizeTo</span><span class="p">(</span><span class="n">myImageSize</span><span class="p">)</span><span class="o">.</span><span class="n">fetch</span> <span class="p">{</span> <span class="n">request</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">error</span> <span class="k">in</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nv">fetchedImage</span> <span class="o">=</span> <span class="n">image</span> <span class="p">{</span>
           <span class="c1">// do something with the image</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
           <span class="c1">// handle the error</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre>
<a href='#configuring_matisse' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='configuring_matisse'>Configuring Matisse</h3>

<p>The shared Matisse instance can be configured with a custom image loader and custom caches (disk and in-memory).
For advanced purposes you can also use a custom request handler that manages image loading as a whole.</p>

<p>You can only configure Matisse before you first use it to load an image. If you need multiple configurations
in your app, see <code>Creating Multiple Matisse Instances</code>.</p>
<a href='#configuring_the_image_loader' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='configuring_the_image_loader'>Configuring the Image Loader</h4>

<p>By default Matisse uses a <a href="Sources/DefaultImageLoader.swift"><code>DefaultImageLoader</code></a> which loads images using
<code>NSURLSession.sharedSession()</code>.</p>

<p>To customize image loading behavior, you can either provide a different <code>NSURLSession</code> like this:</p>
<pre class="highlight swift"><code>    <span class="kt">Matisse</span><span class="o">.</span><span class="nf">useImageLoader</span><span class="p">(</span><span class="kt">DefaultImageLoader</span><span class="p">(</span><span class="n">myCustomURLSession</span><span class="p">))</span>
</code></pre>

<p>If that does not suit your needs, you can implement a custom <a href="Sources/ImageLoader.swift"><code>ImageLoader</code></a>
subclass and implement <code>loadImageForRequest(_:completion:)</code>. There is a <code>ImageLoaderBase</code> class intended
to provide common functionality for image loaders.</p>
<a href='#configuring_the_image_caches' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='configuring_the_image_caches'>Configuring the Image Caches</h4>

<p>Matisse uses two caches to store images. A fast cache and a slow cache.</p>

<p>The fast cache is called synchronously when the context tries to resolve an <code>ImageRequest</code>. This
operation is blocking the main thread and should be as fast as possible therefore. Disk access and
other expensive operations should be avoided in the fast cache.</p>

<p>The slow cache is called in an asynchronous fashion from a background thread. Since the main thread
is not blocked this way, the cache is free to use more expensive operations (like disk IO).</p>

<p>Both caches implement the <a href="Sources/ImageCache.swift"><code>ImageCache</code></a> protocol. By default Matisse
uses an instance of <code>MemoryImageCache</code> as the fast cache and <code>DiskImageCache</code> for the slow cache.</p>

<p>You can overwrite (or disable) the caches like this:</p>
<pre class="highlight swift"><code>    <span class="c1">// provide a custom ImageCache implementations</span>
    <span class="kt">Matisse</span><span class="o">.</span><span class="nf">useFastCache</span><span class="p">(</span><span class="n">myFastCache</span><span class="p">)</span>
    <span class="kt">Matisse</span><span class="o">.</span><span class="nf">useSlowCache</span><span class="p">(</span><span class="n">mySlowCache</span><span class="p">)</span>

    <span class="c1">// disable the caches</span>
    <span class="kt">Matisse</span><span class="o">.</span><span class="nf">useFastCache</span><span class="p">(</span><span class="kc">nil</span><span class="p">)</span>
    <span class="kt">Matisse</span><span class="o">.</span><span class="nf">useSlowCache</span><span class="p">(</span><span class="kc">nil</span><span class="p">)</span>
</code></pre>
<a href='#providing_a_custom_request_handler' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='providing_a_custom_request_handler'>Providing a Custom Request Handler</h4>

<p>To get the most control over the image loading process you can provide your own
<a href="Sources/ImageRequestHandler.swift"><code>ImageRequestHandler</code></a>. This request handler is called when
Matisse cannot resolve a request from the caches (or if they are disabled).</p>

<p>This gives you the most freedom to handle image loading like you whish, but is probably overkill in
most cases.</p>

<p>Provide your own <code>ImageRequestHandler</code> like this:</p>
<pre class="highlight swift"><code>    <span class="kt">Matisse</span><span class="o">.</span><span class="nf">useRequestHandler</span><span class="p">(</span><span class="n">myRequestHandler</span><span class="p">)</span>
</code></pre>

<p><em>Note</em>: When you provide a custom request handler, the image loader is ignored. Likewise, if you provide
a custom image loader, any custom request handler is replaced by the default handler.</p>
<a href='#creating_multiple_matisse_instances' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='creating_multiple_matisse_instances'>Creating Multiple Matisse Instances</h3>

<p>If you need multiple configurations for Matisse (i.e. different image loaders or caches), then you
can create local instances of the <code>Matisse</code> class.</p>

<p>When creating a <code>Matisse</code> instance you need to provide a <code>MatisseContext</code>. This context provides
the actual image retrieval. To create one you need to provide the caches and a request handler.</p>
<pre class="highlight swift"><code>    <span class="c1">// use defaults or provide custom instances</span>
    <span class="k">let</span> <span class="nv">fastCache</span> <span class="o">=</span> <span class="kt">MemoryImageCache</span><span class="p">()</span>
    <span class="k">let</span> <span class="nv">slowCache</span> <span class="o">=</span> <span class="kt">DiskImageCache</span><span class="p">()</span>
    <span class="k">let</span> <span class="nv">requestHandler</span> <span class="o">=</span> <span class="kt">DefaultImageRequestHandler</span><span class="p">()</span>

    <span class="c1">// create a local matisse instance</span>
    <span class="k">let</span> <span class="nv">context</span> <span class="o">=</span> <span class="kt">MatisseContext</span><span class="p">(</span><span class="nv">fastCache</span><span class="p">:</span> <span class="n">fastCache</span><span class="p">,</span> <span class="nv">slowCache</span><span class="p">:</span> <span class="n">slowCache</span><span class="p">,</span> <span class="nv">requestHandler</span><span class="p">:</span> <span class="n">requestHandler</span><span class="p">)</span>
    <span class="k">let</span> <span class="nv">matisse</span> <span class="o">=</span> <span class="kt">Matisse</span><span class="p">(</span><span class="nv">context</span><span class="p">:</span> <span class="n">context</span><span class="p">)</span>

    <span class="c1">// then use it like you would use the shared instance</span>
    <span class="n">matisse</span><span class="o">.</span><span class="nf">load</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="nf">showIn</span><span class="p">(</span><span class="n">imageView</span><span class="p">)</span>
</code></pre>
<a href='#custom_image_transformations' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='custom_image_transformations'>Custom Image Transformations</h3>

<p>Matisse provides an built-in transformation to resize an image to a target size.</p>

<p>If you would like to have a different image transformation you can implement a custom
<a href="Sources/ImageTransformation.swift"><code>ImageTransformation</code></a>. You need to provide a function
that transforms a <code>CGImage</code>, as well as a description that describes your transform exactly.
The description is important because it&rsquo;s used to check if requests are equal when trying
to load an image from the cache.</p>

<p>To use a custom transformation apply it when loading image like this:</p>
<pre class="highlight swift"><code>    <span class="c1">// ColorTransformation would be your custom transformation</span>
    <span class="k">let</span> <span class="nv">myTransformation</span> <span class="o">=</span> <span class="kt">ColorTransformation</span><span class="p">(</span><span class="nv">type</span><span class="p">:</span> <span class="s">"BlackAndWhite"</span><span class="p">)</span>

    <span class="kt">Matisse</span><span class="o">.</span><span class="nf">load</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="o">.</span><span class="nf">transform</span><span class="p">(</span><span class="n">myTransformation</span><span class="p">)</span> <span class="c1">// use the custom transformation</span>
        <span class="o">.</span><span class="nf">showIn</span><span class="p">(</span><span class="n">imageView</span><span class="p">)</span>
</code></pre>

<p>For convenience consider adding an extension to the <code>ImageRequestBuilder</code>:</p>
<pre class="highlight swift"><code>    <span class="kd">extension</span> <span class="kt">ImageRequestBuilder</span> <span class="p">{</span>

        <span class="kd">func</span> <span class="nf">colorize</span><span class="p">(</span><span class="nv">type</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nf">transform</span><span class="p">(</span><span class="kt">ColorTransformation</span><span class="p">(</span><span class="nv">type</span><span class="p">:</span> <span class="n">type</span><span class="p">))</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre>

<p>Then you can use it like this:</p>
<pre class="highlight swift"><code>    <span class="kt">Matisse</span><span class="o">.</span><span class="nf">load</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="o">.</span><span class="nf">colorize</span><span class="p">(</span><span class="s">"BlackAndWhite"</span><span class="p">)</span> <span class="c1">// use the custom transformation</span>
        <span class="o">.</span><span class="nf">showIn</span><span class="p">(</span><span class="n">imageView</span><span class="p">)</span>
</code></pre>
<a href='#installation' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='installation'>Installation</h2>
<a href='#carthage' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='carthage'>Carthage</h3>

<p>To install this library via <a href="https://github.com/Carthage/Carthage">Carthage</a> add the
following to your <code>Cartfile</code>:</p>
<pre class="highlight plaintext"><code>github "konoma/matisse" ~&gt; 1.0
</code></pre>

<p>Then run the standard <code>carthage update</code> process.</p>
<a href='#cocoapods' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='cocoapods'>CocoaPods</h3>

<p>To install this library via <a href="https://cocoapods.org">CocoaPods</a> add the following to
your <code>Podfile</code>:</p>
<pre class="highlight plaintext"><code>pod 'Matisse', '~&gt; 1.0'
</code></pre>

<p>Then run the standard <code>pod update</code> process.</p>
<a href='#license' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='license'>License</h2>

<p>Matisse is released under the <a href="LICENSE">MIT License</a>.</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2016 <a class="link" href="https://github.com/konoma/matisse" target="_blank" rel="external">Markus Gasser</a>. All rights reserved. (Last updated: 2016-03-06)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.5.0</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
